"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Icon = Icon;
exports.icons = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _react = _interopRequireDefault(require("react"));

var _reactNative = require("react-native");

var _ThemeContext = require("../ThemeProvider/ThemeContext");

var _styles = require("../styles");

var _iconsNames = require("./icons.names.generated");

var _testUtils = require("../common/testUtils");

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function sanitizeIconCharacter(iconCharacter) {
  return String.fromCharCode(parseInt(iconCharacter, 16));
}

function Icon(_ref) {
  var _ref$color = _ref.color,
      color = _ref$color === void 0 ? 'currentColor' : _ref$color,
      _ref$size = _ref.size,
      size = _ref$size === void 0 ? 'medium' : _ref$size,
      _ref$name = _ref.name,
      name = _ref$name === void 0 ? '' : _ref$name,
      reverseOnRtl = _ref.reverseOnRtl,
      customColor = _ref.customColor,
      dataTest = _ref.dataTest;

  var _React$useContext = _react.default.useContext(_ThemeContext.ThemeContext),
      _React$useContext2 = (0, _slicedToArray2.default)(_React$useContext, 1),
      theme = _React$useContext2[0];

  var mappedStyles = {
    base: 'icon',
    colorIcon: color,
    widthIcon: size
  };
  var customStyles = {};

  if (customColor) {
    customStyles.color = customColor;
    delete mappedStyles.colorIcon;
  }

  var styles = (0, _styles.useStyles)(mappedStyles);
  var transform = [];

  if (reverseOnRtl !== undefined && theme.rtl) {
    transform.push({
      scaleX: -1
    });
  }

  return _react.default.createElement(_reactNative.View, {
    style: {
      transform: transform,
      justifyContent: 'center',
      alignItems: 'center'
    }
  }, _react.default.createElement(_reactNative.Text, (0, _extends2.default)({
    style: [styles, customStyles]
  }, (0, _testUtils.testAttribute)(dataTest)), sanitizeIconCharacter(_iconsNames.icons[name])));
} // Display name for Storybook


Icon.displayName = 'Icon';
var specificIcons = Object.keys(_iconsNames.icons).reduce(function (acc, iconName) {
  acc[iconName] = function (props) {
    var newProps = _objectSpread({}, props, {
      name: iconName
    });

    return _react.default.createElement(Icon, newProps);
  };

  return acc;
}, {});
exports.icons = specificIcons;