// @flow

import * as React from 'react';
import { createElement } from 'react-native-web';

import type { ImageProps, WebImageProps } from './Image.types';

export function Image({ style, source, webSource, alt, title, dataTest }: ImageProps) {
  const currentSource = webSource ? webSource : source;
  const uris =
  currentSource != null && typeof currentSource === 'object' ?
  Object.keys(currentSource).
  map(key => currentSource[key] ? `${currentSource[key]} ${key}x` : null).
  join(',') :
  undefined;

  const ImageElement = (props: WebImageProps) => createElement('img', props);

  return (
    currentSource !== 'number' &&
    <ImageElement
    alt={alt}
    title={title}
    data-test={dataTest}
    style={style}
    src={currentSource === 'object' ? currentSource[1] : currentSource}
    srcSet={uris} />);



}