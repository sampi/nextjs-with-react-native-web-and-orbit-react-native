/* eslint-disable no-undef */
// @flow

import React from 'react';
import type { Node as ReactNode } from 'react';
import { View, I18nManager } from 'react-native';
import { ThemeProvider } from '@kiwicom/orbit-react-native';
import { defaultTokens } from '@kiwicom/orbit-design-tokens';

const isWeb = typeof window !== 'undefined' && window.document && window.document.createElement;

type Props = {|
  +children?: ReactNode |};


export function ForceRTL({ children }: Props) {
  React.useEffect(() => {
    if (isWeb) {
      window.document.documentElement.dir = 'rtl';
    } else {
      I18nManager.forceRTL(true);
    }
    return function cleanup() {
      if (isWeb) {
        window.document.documentElement.dir = 'ltr';
      } else {
        I18nManager.forceRTL(false);
      }
    };
  });

  return (
    <ThemeProvider
    theme={{
      orbit: defaultTokens,
      rtl: true,
      fontFamily: {
        '400': 'CircularPro-Book',
        '400-italic': 'CircularPro-BookItalic',
        '500': 'CircularPro-Medium',
        '700': 'CircularPro-Bold',

        // Map bold & italic text to be just bold for readability
        '500-italic': 'CircularPro-Medium',
        '700-italic': 'CircularPro-Bold' } }}>



      <View style={styles.container}>{children}</View>
    </ThemeProvider>);

}

const styles = {
  container: {
    width: '100%' } };